<div sam-click-outside (clickOutside)="checkForFocus($event)" sam-tab-outside (tabOutside)="checkForFocus($event)">
  <div class="input-container">
    <input class="sam input"  #input [attr.id]="settings.id" autocomplete="off" type="text" (focus)="inputFocusHandler()" (keyup)="onKeyup($event)"
      [(ngModel)]="inputValue" role="combobox" aria-autocomplete="list" aria-expanded="false" aria-haspopup="true"
      [attr.aria-owns]="settings.id+ '-listbox'" [attr.placeholder]="settings.placeHolderText">
    <ng-container *ngIf="!input.disabled">
      <span>
        <span role="button" class="fa fa-times-circle" aria-label="Clear input" aria-hidden="false" (click)="clearInput()"
          (keyup.enter)="clearInput()">
        </span>
        <!-- [class]="inputValue.length > 0 ? 'fa fa-times-circle reset-icon-active' : 'fa fa-times-circle reset-icon'" -->
      </span>
    </ng-container>
  </div>
  <div>
    <ul #resultsList *ngIf="showResults" [attr.id]="settings.id+ '-listbox'" role="listbox" class="usa-unstyled-list autocomplete-result"
      [attr.aria-label]="settings.labelText" (scroll)="onScroll()">
      <ng-container *ngIf="(results && results.length > 0)">
        <li role="option" *ngFor="let result of results; let i = index" (mouseenter)="listItemHover(i)" [class]="result['highlighted']? 'selected-item':''"
          (click)="selectItem(result)">
          <ng-container *ngIf="itemTemplate" [ngTemplateOutlet]="itemTemplate" [ngTemplateOutletContext]="{$implicit:result}">

          </ng-container>

          <ng-container *ngIf="!itemTemplate">
            <span class="header">{{ result[settings.valueProperty] }}</span>
            <ng-container *ngIf="settings.subValueProperty &&  result[settings.subValueProperty] ">
              <span class="description">{{ result[settings.subValueProperty] }}</span>
            </ng-container>
          </ng-container>
        </li>
      </ng-container>
      <ng-container *ngIf="(!results || results.length == 0)">
        <li class="emptyResults">No results found</li>
      </ng-container>
    </ul>
    <ul #srOnly class="usa-sr-only" aria-live="assertive" aria-relevant="additions"></ul>
  </div>